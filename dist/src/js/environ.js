"use strict";function EnrGetData(){getPHP("src/php/query.php?sql=select * from environ").then(function(a){PageSize(JSON.parse(a))},function(a){console.error("出错了",a)})}function EnrSlice(a){for(var i="",n=0;n<a.length;n++)i+='\n        <div class="col-md-3 col-sm-6 column">\n            <div class="small-img">\n                <img src="src/img/environ/'+a[n].img+'" >\n            </div>\n            \x3c!-- 模态弹框 --\x3e\n            <div class="enr-main-show-modal" >\n                <h4>'+a[n].time+"</h4>\n                <hr/>\n                <h2>"+a[n].title+'</h2>\n                \x3c!-- 按钮触发模态框 --\x3e\n                <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal'+a[n].id+'">\n                    浏览\n                </button>\n                \x3c!-- 模态框（Modal） --\x3e\n                <div class="modal fade" id="myModal'+a[n].id+'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n                    <div class="modal-dialog">\n                        <div class="modal-content">\n                            <div class="modal-header">\n                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\n                                    &times;\n                                </button>\n                            </div>\n                            <div class="modal-body">\n                                <img src="src/img/environ/'+a[n].img+'" class="big-img">\n                            </div>\n                        </div>\x3c!-- /.modal-content --\x3e\n                    </div>\x3c!-- /.modal --\x3e\n                </div>\n            </div>\n            \x3c!-- 模态弹框 --\x3e\n        </div>\n        ';$("#pageMain").html(i)}function PageSize(a){EnrSlice(a),$(function(){!function(i){for(var n=$(i.pageMain),e=$(i.pageNav),a=$(i.pagePrev),d=$(i.pageNext),s=i.curNum,t=Math.ceil(n.find(">div").length/s),l="",o=0,c=0;c<t;c++)l+='<a href="javascript:;">'+(c+1)+"</a>";e.html(l),e.find("a:first").addClass(i.activeClass),e.find("a").each(function(){$(this).click(function(){e.find("a").removeClass(i.activeClass),$(this).addClass(i.activeClass),o=$(this).index(),$(n).find(">div").hide();for(var a=($(this).html()-1)*s;a<$(this).html()*s;a++)$(n).find(">div").eq(a).show()})}),$(n).find(">div").hide();for(var c=0;c<s;c++)$(n).find(">div").eq(c).show();d.click(function(){if($(n).find(">div").hide(),o==t-1){alert("已经是最后一页");for(var a=(t-1)*s;a<t*s;a++)$(n).find(">div").eq(a).show();return!1}e.find("a").removeClass(i.activeClass),o++,e.find("a").eq(o).addClass(i.activeClass);for(var a=o*s;a<(o+1)*s;a++)$(n).find(">div").eq(a).show()}),a.click(function(){if($(n).find(">div").hide(),0==o){alert("当前是第一页");for(var a=0;a<s;a++)$(n).find(">div").eq(a).show();return!1}e.find("a").removeClass(i.activeClass),o--,e.find("a").eq(o).addClass(i.activeClass);for(var a=o*s;a<(o+1)*s;a++)$(n).find(">div").eq(a).show()})}({pageMain:"#pageMain",pageNav:"#pageNav",pagePrev:"#prev",pageNext:"#next",curNum:16,activeClass:"active",ini:0})})}EnrGetData();